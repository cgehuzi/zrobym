const noscroll=function(t,e=!0){!0===e&&$(t).addClass("noscroll"),!1===e&&$(t).removeClass("noscroll"),"toggle"===e&&$(t).toggleClass("noscroll")},active=function(t,e=!0){!0===e&&$(t).addClass("active"),!1===e&&$(t).removeClass("active"),"toggle"===e&&$(t).toggleClass("active")},opened=function(t,e=!0){!0===e&&$(t).addClass("opened"),!1===e&&$(t).removeClass("opened"),"toggle"===e&&$(t).toggleClass("opened")},preloader=document.querySelector(".preloader");preloader&&document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){$(preloader).fadeOut(1e3)},2500)});const menu=document.querySelector(".menu"),menu_open=document.querySelector(".menu-open"),menu_close=document.querySelector(".menu-close");menu_open&&menu_open.addEventListener("click",function(){opened(menu),active(menu_close),noscroll("body")}),menu_close&&menu_close.addEventListener("click",function(){opened(menu,!1),active(menu_close,!1),noscroll("body",!1)});const scrollInit=function(){const t=document.querySelectorAll("[data-scroll]");if(t)if("function"==typeof IntersectionObserver){const e=new IntersectionObserver(function(t){t.forEach(function(t){if(t.isIntersecting){const n=t.target;setTimeout(function(){n.classList.add("scrolled"),e.unobserve(n)},400)}})},{});t.forEach(function(t){e.observe(t)})}else t.forEach(function(t){t.classList.add("scrolled")})};scrollInit();const fancy_items=$("[data-fancybox]");fancy_items.length&&fancy_items.fancybox({protect:!0,buttons:["zoom","close"],backFocus:!1});const more_buttons=document.querySelectorAll("[data-more]");more_buttons&&more_buttons.forEach(function(t){const e=document.querySelector(t.dataset.more),n=t.innerHTML,o=t.dataset.closeText;t.addEventListener("click",function(){$(e).slideToggle(),active(t,"toggle"),t.classList.contains("active")?t.innerHTML=o:t.innerHTML=n})});const number_to=function(t,e,n,o){var c=(new Date).getTime();setTimeout(function(){var r=((new Date).getTime()-c)/o,a=Math.floor((n-e)*r+e);t.innerText=r<1?a:n,r<1&&setTimeout(arguments.callee,10)},10)},numberToInit=function(){const t=document.querySelectorAll("[data-number-to]");if(t)if("function"==typeof IntersectionObserver){const e=new IntersectionObserver(function(t){t.forEach(function(t){if(t.isIntersecting){const n=t.target,o=n.dataset.numberTo;setTimeout(function(){number_to(n,0,+o,3e3),e.unobserve(n)},400)}})},{});t.forEach(function(t){e.observe(t)})}else t.forEach(function(t){const e=t.dataset.numberTo;number_to(elem,0,+e,3e3)})};if(numberToInit(),"object"==typeof city_items_data){const t=960,e=500,n=4,o=[];city_items_data.forEach(function(t,e){o.push({source:city_items_center[0],target:city_items_data[e]})});const c=d3.select(".city__map").append("svg:svg").attr("class","city__map-body").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 960 500"),r=d3.layout.force().nodes(city_items_center.concat(city_items_data)).links([]).gravity(.06).charge(-400).size([t,e]),a=c.selectAll(".link").data(o).enter().append("line").attr("class","city__map-line").attr("stroke","#f5f5f5").attr("fill","#f5f5f5"),i=c.selectAll("circle.node").data(city_items_center.concat(city_items_data)).enter().append("g").attr("class","city__map-node").on("mouseover",function(t,e){e>0?(d3.select(this).selectAll("circle").transition().duration(250).style("cursor","grab").attr("r",n+2).attr("fill","#FCF4DC"),d3.select(this).select("text").transition().style("cursor","grab").duration(250).style("cursor","grab").attr("font-size","1.5rem").attr("x",25).attr("y",5)):d3.select(this).selectAll("circle").transition().duration(250).style("cursor","grab")}).on("mouseout",function(t,e){e>0&&(d3.select(this).selectAll("circle").transition().duration(250).attr("r",n).attr("fill","#f5f5f5"),d3.select(this).select("text").transition().duration(250).attr("font-size","1rem").attr("x",15).attr("y",5))}).call(r.drag);i.append("svg:circle").attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",function(t,e){return e>0?n:n+5}).attr("fill",function(t,e){return e>0?"#f5f5f5":"#fff7d8"}),i.append("text").text(function(t,e){return t.name}).attr("x",15).attr("y",5).attr("font-family","Montserrat").attr("fill",function(t,e){return"#cda173"}).attr("font-size",function(t,e){return e>0?"1rem":"2rem"}).attr("text-anchor",function(t,e){return"beginning"}),r.on("tick",function(t){i.attr("transform",function(t,e){return"translate("+t.x+","+t.y+")"}),a.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y})}),r.start()}const tab_blocks=document.querySelectorAll("[data-tabs]");tab_blocks&&tab_blocks.forEach(function(t){const e=t.querySelectorAll("[data-tab-open]");e.forEach(function(t){const e=document.querySelector(t.getAttribute("data-tab-open")),n=document.querySelector(t.getAttribute("data-tab-group")),o=n.querySelectorAll("[data-tab-item]"),c=n.querySelectorAll("[data-tab-open]");t.addEventListener("click",function(n){sessionStorage.setItem("tab_was",t.getAttribute("data-tab-open")),o.forEach(function(t){active(t,!1)}),c.forEach(function(t){active(t,!1)}),active(e),active(t)})});const n=sessionStorage.getItem("tab_was");if(n){const t=document.querySelector('[data-tab-open="'+n+'"]');t&&window.location.href.split("?").length>1&&window.location.href.split("?")[1].indexOf("-page=")>0?(t.click(),$("html, body").animate({scrollTop:$(e[0]).offset().top},600)):e[0].click()}else e[0].click()});const filter_sections=document.querySelectorAll("[data-filters]");filter_sections&&filter_sections.forEach(function(t){const e=t.querySelectorAll("[data-filter-show]"),n=t.querySelectorAll("[data-filter-group]"),o=t.querySelectorAll("[data-filter-item]");e&&(e.forEach(function(t){const c=t.dataset.filterShow;t.addEventListener("click",function(){active(e,!1),active(t,!0),o.forEach(function(t){active(t,!1),t.dataset.filterItem.split("||").includes(c)&&active(t,!0)}),n.forEach(function(t){active(t,!1),t.querySelectorAll("[data-filter-item]").forEach(function(e){e.classList.contains("active")&&active(t,!0)})})})}),e[0].click())});const explication_items=document.querySelectorAll("[data-explication-target]");explication_items&&explication_items.forEach(function(t){const e='[data-explication="'+t.dataset.explicationTarget+'"]',n=t.dataset.explicationCaption||"";document.querySelectorAll(e).forEach(function(t){t.dataset.caption=n}),t.addEventListener("click",function(){$.fancybox.open($(e),{protect:!0,buttons:["zoom","close"],backFocus:!1})})});const phone_buttons=document.querySelectorAll("[data-phone]");phone_buttons&&phone_buttons.forEach(function(t){const e=t.dataset.href,n=t.dataset.phone;t.addEventListener("click",function(o){t.hasAttribute("data-href")&&(o.preventDefault(),t.innerHTML=n,t.setAttribute("href",e),t.removeAttribute("data-href"))})});const checkSpam=function(t,e,n=5e3){setTimeout(function(){$(t+" form").append('<input type="text" name="'+e+'" value="unvisible" style="display:none;">')},n)},project_gallery=document.querySelector(".project-gallery__list");function scrollFunction(){document.body.scrollTop>400||document.documentElement.scrollTop>400?document.querySelector(".totop").classList.add("visible"):document.querySelector(".totop").classList.remove("visible")}function topFunction(){$("body, html").animate({scrollTop:0},600)}project_gallery&&project_gallery.addEventListener("scroll",function(){project_gallery.classList.add("off")}),window.onscroll=function(){scrollFunction()};